---
  - name: Set ftpd_anon_write flag on and keep it persistent across reboots
    ansible.posix.seboolean:
      name: ftpd_anon_write
      state: yes
      persistent: yes
  - name: Allow full read/write access through SELinux
    seboolean:
      name: ftpd_full_access
      state: yes
      persistent: yes
    tags: vsftpd
    when:
      - ansible_os_family == 'RedHat'
      - ansible_distribution_major_version >= "7"
  - name: Allow access to home directories
    seboolean:
      name: ftp_home_dir
      state: yes
      persistent: yes
    when: var_exists.rc == 0
    tags: vsftpd
  - name: manage selinux settings
    sefcontext:
      target: "{{ pub_dir }}"
      setype: public_content_rw_t
      state: present
    notify:
      - run restorecon
...